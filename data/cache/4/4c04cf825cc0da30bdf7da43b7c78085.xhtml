
<h2 class="sectionedit1" id="以指定的字符串分割字符串">以指定的字符串分割字符串</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> 函数StringSplit(分割字符串到一个字符串数组中，其中该数组第0位为分割后字符串的个数) </div>
</li>
<li class="level1"><div class="li"> 函数StringSplit_Struct(以定义一个新结构的方式来实现该函数)</div>
</li>
</ul>
<pre class="code c"><span class="co2">#include &lt;stdio.h&gt;</span>
&nbsp;
<span class="coMULTI">/*实现方案1*/</span>
<span class="coMULTI">/*分割字符串到一个字符串数组中，其中该数组第一位为分割后的个数*/</span>
<span class="kw4">char</span><span class="sy0">**</span> StringSplit<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span><span class="sy0">*</span> string<span class="sy0">,</span><span class="kw4">const</span> <span class="kw4">char</span><span class="sy0">*</span> split<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     <span class="kw4">char</span><span class="sy0">**</span> result<span class="sy0">;</span>
     <span class="coMULTI">/*首先分配一个char*的内存，然后再动态分配剩下的内存*/</span>
     result <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <a href="http://www.opengroup.org/onlinepubs/009695399/functions/memset.html"><span class="kw3">memset</span></a><span class="br0">&#40;</span>result<span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="coMULTI">/*定义一个遍历用的指针和一个寻找位置用的指针*/</span>
     <span class="kw4">char</span><span class="sy0">*</span> p <span class="sy0">=</span> string<span class="sy0">;</span>
     <span class="kw4">char</span><span class="sy0">*</span> pos <span class="sy0">=</span> string<span class="sy0">;</span>
     <span class="coMULTI">/*无论是否存在该分割串，绝对都会分割到一个字符串*/</span>
     <span class="kw4">int</span> count <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
     <span class="kw1">while</span><span class="br0">&#40;</span><span class="sy0">*</span>p <span class="sy0">!=</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
         <span class="kw4">char</span><span class="sy0">*</span> temp<span class="sy0">;</span>
         <span class="kw4">char</span><span class="sy0">*</span> tt<span class="sy0">;</span>
         <span class="coMULTI">/*查找该字符串*/</span>
         pos <span class="sy0">=</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/strstr.html"><span class="kw3">strstr</span></a><span class="br0">&#40;</span>p<span class="sy0">,</span>split<span class="br0">&#41;</span><span class="sy0">;</span>
         <span class="coMULTI">/*结果为0说明剩下的字符串中没有该字符了*/</span>
         <span class="kw1">if</span><span class="br0">&#40;</span>pos <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>
         <span class="br0">&#123;</span>
           result <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/realloc.html"><span class="kw3">realloc</span></a><span class="br0">&#40;</span>result<span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>count<span class="sy0">+</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
           result<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> count<span class="sy0">;</span>
           result<span class="br0">&#91;</span>count<span class="br0">&#93;</span> <span class="sy0">=</span> p<span class="sy0">;</span>
           result<span class="br0">&#91;</span>count<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> NULL<span class="sy0">;</span>
           <span class="kw1">return</span> result<span class="sy0">;</span>
         <span class="br0">&#125;</span>
         <span class="coMULTI">/*分配临时字符串空间*/</span>
         temp <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>pos <span class="sy0">-</span> p<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
         <a href="http://www.opengroup.org/onlinepubs/009695399/functions/memset.html"><span class="kw3">memset</span></a><span class="br0">&#40;</span>temp<span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>pos <span class="sy0">-</span> p<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
         <span class="coMULTI">/*设置头指针，以便赋值时使用*/</span>
         tt <span class="sy0">=</span> temp<span class="sy0">;</span>
         <span class="kw1">while</span><span class="br0">&#40;</span>p<span class="sy0">&lt;=</span>pos<span class="br0">&#41;</span>
         <span class="br0">&#123;</span>
           <span class="sy0">*</span>temp<span class="sy0">++</span> <span class="sy0">=</span> <span class="sy0">*</span>p<span class="sy0">++;</span>
         <span class="br0">&#125;</span>
         <span class="coMULTI">/*将字符串结尾置零*/</span>
         <span class="sy0">*--</span>temp <span class="sy0">=</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="sy0">;</span>
         result <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/realloc.html"><span class="kw3">realloc</span></a><span class="br0">&#40;</span>result<span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>count<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
         result<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> count<span class="sy0">;</span>
         result<span class="br0">&#91;</span>count<span class="br0">&#93;</span> <span class="sy0">=</span> tt<span class="sy0">;</span>
         count<span class="sy0">++;</span>
         <span class="coMULTI">/*设置下一次遍历时的指针（重要）。当split长度大于1时，不这样设置会多赋值不必要的字符串*/</span>
         p <span class="sy0">+=</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/strlen.html"><span class="kw3">strlen</span></a><span class="br0">&#40;</span>split<span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
     <span class="kw1">return</span> result<span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="coMULTI">/*实现方案2*/</span>
<span class="coMULTI">/*为方便计数定义的结构，字符串数组从0开始赋值*/</span>
<span class="kw4">typedef</span> <span class="kw4">struct</span><span class="br0">&#123;</span>
     <span class="kw4">int</span> number<span class="sy0">;</span>        <span class="coMULTI">/*分割的字符串个数*/</span>
     <span class="kw4">char</span><span class="sy0">**</span> string<span class="sy0">;</span>        <span class="coMULTI">/*字符串数组*/</span>
<span class="br0">&#125;</span>StringTab<span class="sy0">;</span>
<span class="coMULTI">/*分割字符串到一个字符串数组中*/</span>
StringTab StringSplit_Struct<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span><span class="sy0">*</span> string<span class="sy0">,</span><span class="kw4">const</span> <span class="kw4">char</span><span class="sy0">*</span> split<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     StringTab result<span class="sy0">;</span>
     <span class="coMULTI">/*首先分配一个char*的内存，然后再动态分配剩下的内存*/</span>
     result.<span class="me1">string</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <a href="http://www.opengroup.org/onlinepubs/009695399/functions/memset.html"><span class="kw3">memset</span></a><span class="br0">&#40;</span>result.<span class="me1">string</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="coMULTI">/*无论是否存在该分割串，绝对都会分割到一个字符串*/</span>
     result.<span class="me1">number</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
     <span class="coMULTI">/*定义一个遍历用的指针和一个寻找位置用的指针*/</span>
     <span class="kw4">char</span><span class="sy0">*</span> p <span class="sy0">=</span> string<span class="sy0">;</span>
     <span class="kw4">char</span><span class="sy0">*</span> pos <span class="sy0">=</span> string<span class="sy0">;</span>
     <span class="kw1">while</span><span class="br0">&#40;</span><span class="sy0">*</span>p <span class="sy0">!=</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
        <span class="kw4">char</span><span class="sy0">*</span> temp<span class="sy0">;</span>
        <span class="kw4">char</span><span class="sy0">*</span> tt<span class="sy0">;</span>
        <span class="coMULTI">/*查找该字符串*/</span>
        pos <span class="sy0">=</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/strstr.html"><span class="kw3">strstr</span></a><span class="br0">&#40;</span>p<span class="sy0">,</span>split<span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="coMULTI">/*结果为0说明剩下的字符串中没有该字符了*/</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>pos <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
          result.<span class="me1">string</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/realloc.html"><span class="kw3">realloc</span></a><span class="br0">&#40;</span>result.<span class="me1">string</span><span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>result.<span class="me1">number</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          result.<span class="me1">string</span><span class="br0">&#91;</span>result.<span class="me1">number</span><span class="br0">&#93;</span> <span class="sy0">=</span> p<span class="sy0">;</span>
          <span class="kw1">return</span> result<span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="coMULTI">/*分配临时字符串空间*/</span>
        temp <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>pos <span class="sy0">-</span> p<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <a href="http://www.opengroup.org/onlinepubs/009695399/functions/memset.html"><span class="kw3">memset</span></a><span class="br0">&#40;</span>temp<span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>pos <span class="sy0">-</span> p<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="coMULTI">/*设置头指针，以便赋值时使用*/</span>
        tt <span class="sy0">=</span> temp<span class="sy0">;</span>
        <span class="kw1">while</span><span class="br0">&#40;</span>p<span class="sy0">&lt;=</span>pos<span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
          <span class="sy0">*</span>temp<span class="sy0">++</span> <span class="sy0">=</span> <span class="sy0">*</span>p<span class="sy0">++;</span>
        <span class="br0">&#125;</span>
        <span class="coMULTI">/*将字符串结尾置零*/</span>
        <span class="sy0">*--</span>temp <span class="sy0">=</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="sy0">;</span>
        result.<span class="me1">string</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span> <span class="sy0">*</span> <span class="br0">&#41;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/realloc.html"><span class="kw3">realloc</span></a><span class="br0">&#40;</span>result.<span class="me1">string</span><span class="sy0">,</span><span class="kw4">sizeof</span><span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">*</span><span class="br0">&#40;</span>result.<span class="me1">number</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        result.<span class="me1">string</span><span class="br0">&#91;</span>result.<span class="me1">number</span><span class="br0">&#93;</span> <span class="sy0">=</span> tt<span class="sy0">;</span>
        <span class="coMULTI">/*计数器加一*/</span>
        result.<span class="me1">number</span><span class="sy0">++;</span>
        <span class="coMULTI">/*设置下一次遍历时的指针（重要）。当split长度大于1时，不这样设置会多赋值不必要的字符串*/</span>
        p <span class="sy0">+=</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/strlen.html"><span class="kw3">strlen</span></a><span class="br0">&#40;</span>split<span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
     <span class="kw1">return</span> result<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     <span class="coMULTI">/*进行测试*/</span>
     <span class="coMULTI">/*方案1测试*/</span>
     <span class="kw4">char</span><span class="sy0">**</span> array<span class="sy0">;</span>
     array <span class="sy0">=</span> StringSplit<span class="br0">&#40;</span><span class="st0">&quot;a/aaa//哈aa&quot;</span><span class="sy0">,</span><span class="st0">&quot;aaa&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="kw4">int</span> i <span class="sy0">;</span>
     <span class="kw1">for</span><span class="br0">&#40;</span>i<span class="sy0">=</span><span class="nu0">1</span><span class="sy0">;</span>i<span class="sy0">&lt;=</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span>array<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>i<span class="sy0">++</span><span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
         <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Num:%d I:%d: Value: %s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span>array<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span>i<span class="sy0">,</span>array<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
&nbsp;
     array <span class="sy0">=</span> StringSplit<span class="br0">&#40;</span><span class="st0">&quot;a/aa哈a//哈aa&quot;</span><span class="sy0">,</span><span class="st0">&quot;哈&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="kw1">for</span><span class="br0">&#40;</span>i<span class="sy0">=</span><span class="nu0">1</span><span class="sy0">;</span>i<span class="sy0">&lt;=</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span>array<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span>i<span class="sy0">++</span><span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
         <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Num:%d I:%d: Value: %s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span>array<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span>i<span class="sy0">,</span>array<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
&nbsp;
     <span class="coMULTI">/*方案2测试*/</span>
     StringTab array2<span class="sy0">;</span>
     array2 <span class="sy0">=</span> StringSplit_Struct<span class="br0">&#40;</span><span class="st0">&quot;a/aaa//哈aa&quot;</span><span class="sy0">,</span><span class="st0">&quot;aaa&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="kw1">for</span><span class="br0">&#40;</span>i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>i<span class="sy0">&lt;=</span>array2.<span class="me1">number</span><span class="sy0">;</span>i<span class="sy0">++</span><span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
        <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Num:%d I:%d: Value: %s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span>array2.<span class="me1">number</span><span class="sy0">,</span>i<span class="sy0">,</span>array2.<span class="me1">string</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
     array2 <span class="sy0">=</span> StringSplit_Struct<span class="br0">&#40;</span><span class="st0">&quot;a/aa哈a//哈aa&quot;</span><span class="sy0">,</span><span class="st0">&quot;哈&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="kw1">for</span><span class="br0">&#40;</span>i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>i<span class="sy0">&lt;=</span>array2.<span class="me1">number</span><span class="sy0">;</span>i<span class="sy0">++</span><span class="br0">&#41;</span>
     <span class="br0">&#123;</span>
        <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Num:%d I:%d: Value: %s<span class="es1">\n</span>&quot;</span><span class="sy0">,</span>array2.<span class="me1">number</span><span class="sy0">,</span>i<span class="sy0">,</span>array2.<span class="me1">string</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
     <span class="br0">&#125;</span>
&nbsp;
     <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

</div>
